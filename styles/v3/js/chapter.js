/*!
 * Powered by uglifiyJS v2.6.1, Build by http://www.ossoft.cn
 * build time: Thu Jul 15 2021 15:35:35 GMT+0800 (China Standard Time)
*/
function thmoon(){document.getElementById("readbg").className="gd theme-moon active",BookUtils.setStorage("thmoon","1")}function clsize(t){15==t?document.getElementById("TextContent").className="read-content fz14":16==t?document.getElementById("TextContent").className="read-content fz16":17==t?document.getElementById("TextContent").className="read-content fz18":18==t?document.getElementById("TextContent").className="read-content fz20":19==t?document.getElementById("TextContent").className="read-content fz22":20==t&&(document.getElementById("TextContent").className="read-content fz24"),BookUtils.setStorage("fontsize",t)}function cltheme(t){t||(t=7),1==t?document.getElementById("readbg").className="hui":2==t?document.getElementById("readbg").className="ls":3==t?document.getElementById("readbg").className="fs":4==t?document.getElementById("readbg").className="nuan":5==t?document.getElementById("readbg").className="huang":6==t?document.getElementById("readbg").className="lan":7==t&&(document.getElementById("readbg").className="nuan"),BookUtils.setStorage("theme",t),BookUtils.removeStorage("thmoon")}function toggleOpt(t,e){var n=this;if(!t)return n;$.isFunction(e)&&(e={callback:e});var o={mode:"visible",container:$("body"),callback:function(){}},i=$.extend({},o,e||{});n.callback=i.callback,n.mode=i.mode,!t.size&&$.isArray(t)&&(t=t.join()),"string"==typeof t?i.container.on("click",t,function(t){toggleOptToggle($(this),t)}):t.length&&t.on("click",function(t){toggleOptToggle($(this),t)}),toggleOptAria(t)}function toggleOptAria(t){"visible"==this.mode&&"string"==typeof t&&$(t).each(function(){var t=$(this);t.attr({role:"menuitem","aria-expanded":t.hasClass("active")})})}function toggleOptToggle(t,e){var n,o=this,i=t;"visible"==o.mode?(i=$("#"+t.attr("data-rel")),(n=t.hasClass("active"))?(t.removeClass("active").attr("aria-expanded","false"),i.removeClass("active")):(t.addClass("active").attr("aria-expanded","true"),i.addClass("active"))):"more"==o.mode&&((n="string"==typeof t.attr("open"))?t.removeAttr("open"):t.attr("open",""))}$(function(){BookChapterUtils.init();var t=BookUtils.getStorage("thmoon"),e=BookUtils.getStorage("fontsize"),n=BookUtils.getStorage("theme");n?cltheme(n):thmoon(),t&&thmoon(),e?clsize(e):(clsize(18),e=18),$("#set_font_inc_m").click(function(){19>=e&&""!=e?(e++,clsize(e)):clsize("20")}),$("#set_font_inc_pc").click(function(){19>=e&&""!=e?(e++,clsize(e)):clsize("20")}),$("#set_font_dec_m").click(function(){e>=16&&""!=e?(e--,clsize(e)):clsize("15")}),$("#set_font_dec_pc").click(function(){e>=16&&""!=e?(e--,clsize(e)):clsize("15")}),$("#set_theme_m").click(function(){6>=n?(n++,cltheme(n)):(n-=6,cltheme(n))}),$("#set_theme_pc").click(function(){6>=n?(n++,cltheme(n)):(n-=6,cltheme(n))}),$("#mode").click(function(){var t=document.getElementById("readbg").getAttribute("class");"gd theme-moon active"!==t?thmoon():cltheme(n)})}),"undefined"==typeof BookChapterUtils&&(BookChapterUtils={}),BookChapterUtils={params:{settingsJson:{dn:"d",fs:3,skin:0},catalog_cache:!1,settingsKey:"SET_CHAPTER"},init:function(){this.loadSetting(),this.initModes(),this.initDayNightSetting(),this.initFontSizeSetting(),this.initAudio()},loadSetting:function(){var t='<div class="readerControls">\n    <button class="readerControls_item" onclick="BookChapterUtils.showCatalogs()">\n        <svg class="icon">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-catalog"></use>\n        </svg>\n    </button>\n    <button class="readerControls_item" id="set_theme_pc">\n        <svg class="icon">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-color"></use>\n        </svg>\n    </button>\n    <div class="readerControls_fontSize">\n        <button class="fontSizeButton" onclick="$(\'.readerControls_fontSize\').toggleClass(\'expand\');">\n            <svg class="icon icon-font-set">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-font-set"></use>\n            </svg>\n        </button>\n        <div class="fontSizeLabel left"  id="set_font_dec_pc"><span class="iconLeft">A-</span></div>\n        <div class="fontSizeLabel right" id="set_font_inc_pc"><span class="iconRight">A+</span></div>\n    </div>\n    <button class="readerControls_item dark" id="mode">\n        <svg class="icon icon-night">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-day"></use>\n        </svg>\n    </button>\n    <button class="readerControls_item" id="audioOpt">\n        <svg class="icon">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-erji"></use>\n        </svg>\n    </button>\n</div>',e='<div id="pageReadOpt" class="page-read-opt" data-settings-key="r_set">\n    <div id="readOptSet" class="read-opt-bot read-opt-set1">\n        <div id="readSetSkin" class="read-set-skin">\n            <ul class="btn-group" role="radiogroup">\n                <li class="btn-group-cell read-set-cell">\n                    <button class="readerControls_item_mobile" id="set_theme_m">\n                        <svg class="icon">\n                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-color"></use>\n                        </svg>\n                    </button>\n                </li>\n                <li class="btn-group-cell read-set-cell">\n                    <button class="readerControls_item_mobile" id="set_font_dec_m">\n                        <svg class="icon">\n                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-size-down"></use>\n                        </svg>\n                    </button>\n                </li>\n                <li class="btn-group-cell read-set-cell">\n                    <button class="readerControls_item_mobile" id="set_font_inc_m">\n                        <svg class="icon">\n                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-size-up"></use>\n                        </svg>\n                    </button>\n                </li>\n                <li class="btn-group-cell read-set-cell">\n                    <button class="readerControls_item_mobile" name="StranLink" id="StranLink" onclick="StranBody()">\n                        \u7b80\n                    </button>\n                </li>\n            </ul>\n        </div>\n    </div>\n    <footer class="read-opt-footer">\n        <div class="btn-group"><a onclick="BookChapterUtils.showCatalogs()" class="btn-group-cell">\n            <svg class="icon icon-catalog">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-catalog"></use>\n            </svg>\n            <h4 class="read-opt-footer-h">'+i18nUtils.prop("book_list")+'</h4>\n        </a> <a href="javascript:" id="readBtnSet" class="btn-group-cell jsLayerTrigger" data-rel="readOptSet" data-eid="mqd_R14" role="menuitem" aria-expanded="false">\n            <svg class="icon icon-font-set">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-font-set"></use>\n            </svg>\n            <svg class="icon icon-font-set-on">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-font-set-on"></use>\n            </svg>\n            <h4 class="read-opt-footer-h">'+i18nUtils.prop("book_setting")+'</h4>\n        </a> <a href="javascript:" id="readBtnMode" class="btn-group-cell" data-mode="night" role="checkbox">\n            <svg class="icon icon-day">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-day"></use>\n            </svg>\n            <svg class="icon icon-night">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-night"></use>\n            </svg>\n            <h4 class="read-opt-footer-h">'+i18nUtils.prop("book_mode_night")+'</h4>\n        </a>\n            <a id="audioOptMobile" class="btn-group-cell jsLayerTrigger">\n                <svg class="icon">\n                    <use xlink:href="#icon-erji"></use>\n                </svg>\n                <h4 class="read-opt-footer-h">'+i18nUtils.prop("book_listen")+"</h4>\n            </a>\n        </div>\n    </footer>\n</div>";$("body").append(t).append(e)},initModes:function(){var t=$("#readBtnMode"),e=BookUtils.getStorage("thmoon"),n=BookUtils.getStorage("theme");if(e)t.data("mode","night");else if(n){t.data("mode","day");var o=$('[data-index="'+n+'"]',"#readSetSkin");o.val();o.attr("checked","true")}var i=!0,s=$("#pageReadOpt");$(".mlfy_main").on("click",function(){i&&setTimeout(function(){s.toggleClass("active"),i=!0},50),i=!1})},initFontSizeSetting:function(){var t=$("#readBtnSet");toggleOpt(t)},initAudio:function(){var t=$("#audioOptMobile");t.on("click",function(){$("#audioOptSet").addClass("active")})},initDayNightSetting:function(){var t=$("#readBtnMode"),e=t.find("h4"),n=BookUtils.getStorage("theme");t.on("click",function(){var o=t.data("mode");"day"===o?(cltheme(n),e.html(e.html().replace("\u65e5","\u591c")),e.html(e.html().replace("Day","Night")),t.find(".icon-day").hide(),t.find(".icon-night").show(),t.data("mode","night")):(thmoon(),e.html(e.html().replace("\u591c","\u65e5")),e.html(e.html().replace("Night","Day")),t.data("mode","day"),t.find(".icon-day").show(),t.find(".icon-night").hide())}),t.trigger("click")},showCatalogs:function(){var t=$("#artWrap"),e="/files/book/scripts/"+t.data("burl")+"/catalog.js",n="/scripts/catalog/handle.m.v3.js";"undefined"!=typeof ctx_cdn&&(e=ctx_cdn+e);var o=t.data("cdn-static");"undefined"!=typeof o&&(n=o+n),BookUtils.showCatalogs(e,n,t.data("cid"))}};